@use '../../../../../styles/mixins' as mix;

.channels-sidebar {
  height: 100%;
  background-color: var(--container-bg);
  border-right: 1px solid var(--border-color);
  transition: transform 0.3s ease, margin 0.3s ease, width 0.3s ease;
  width: 200px;
  display: flex;
  flex-direction: column;
  border-radius: 1.9rem;
  overflow: hidden;

  @include mix.tablet-landscape {
    width: 240px;
  }

  @include mix.laptop {
    width: 280px;
  }

  @include mix.desktop {
    width: 320px;
  }

  &--hidden {
    width: 0;
    min-width: 0;
    margin-right: 0;
    transform: translateX(-100%);
    border-right: none;
  }

  &__header {
    @include mix.flex(row, space-between, center);
    padding: var(--space-4);
    flex-shrink: 0;

    @include mix.tablet-landscape {
      padding: var(--space-5) var(--space-4);
    }

    @include mix.laptop {
      padding: var(--space-6) var(--space-4);
    }
  }

  &__branding {
    @include mix.flex(row, flex-start, center);
    gap: var(--space-2);
    flex: 1;
  }

  &__logo {
    width: 32px;
    height: 32px;
    object-fit: contain;

    @include mix.laptop {
      width: 40px;
      height: 40px;
    }
  }

  &__workspace-name {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-primary, #000);

    @include mix.laptop {
      font-size: 1.5rem;
    }
  }

  &__multi-edit-btn {
    @include mix.flex(row, center, center);
    width: 36px;
    height: 36px;
    border: none;
    background: transparent;
    border-radius: 50%;
    cursor: pointer;
    transition: background-color 0.2s;
    position: relative;
    flex-shrink: 0;

    &:hover:not(&--active) {
      background-color: #eceefe;
    }

    &--active {
      &:hover {
        background-color: #eceefe;
      }
    }

    @include mix.laptop {
      width: 40px;
      height: 40px;
    }
  }

  &__multi-edit-icon {
    width: 20px;
    height: 20px;
    transition: opacity 0.2s;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);

    &--default {
      opacity: 1;

      .channels-sidebar__multi-edit-btn:hover:not(.channels-sidebar__multi-edit-btn--active) & {
        opacity: 0;
      }

      .channels-sidebar__multi-edit-btn--active & {
        opacity: 0;
      }
    }

    &--hover {
      opacity: 0;

      .channels-sidebar__multi-edit-btn:hover:not(.channels-sidebar__multi-edit-btn--active) & {
        opacity: 1;
      }
    }

    &--active {
      opacity: 0;

      .channels-sidebar__multi-edit-btn--active & {
        opacity: 1;
      }
    }

    @include mix.laptop {
      width: 20px;
      height: 20px;
    }
  }

  &__content {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow-y: auto;
    @include mix.custom-scrollbar(6px, transparent, var(--border-color));
  }

  &__section {
    display: flex;
    flex-direction: column;
    padding: var(--space-2) 0;
  }

  &__section-header {
    @include mix.flex(row, space-between, center);
    padding: var(--space-2) var(--space-3);
    gap: var(--space-2);
  }

  &__section-toggle {
    @include mix.flex(row, flex-start, center);
    flex: 1;
    gap: var(--space-2);
    padding: var(--space-2);
    border: none;
    background: transparent;
    cursor: pointer;
    transition: background-color 0.2s;
    text-align: left;
    position: relative;
  }

  &__workspace-icon-wrapper {
    @include mix.flex(row, center, center);
    width: 16px;
    height: 16px;
    flex-shrink: 0;
    position: relative;
  }

  &__workspace-icon {
    width: 16px;
    height: 16px;
    display: block;
    object-fit: contain;
    transition: filter 0.2s;

    .channels-sidebar__section-toggle:hover & {
      filter: brightness(0) saturate(100%) invert(35%) sepia(89%) saturate(2315%) hue-rotate(228deg)
        brightness(98%) contrast(92%);
    }
  }

  &__dropdown-icon-wrapper {
    @include mix.flex(row, center, center);
    width: 12px;
    height: 12px;
    flex-shrink: 0;
    position: relative;
    margin-right: var(--space-2);
  }

  &__dropdown-icon {
    width: 12px;
    height: 12px;
    transform: rotate(-90deg);

    &--open {
      transform: rotate(0deg);
    }

    &--default {
      opacity: 1;

      .channels-sidebar__section-toggle:hover & {
        opacity: 0;
      }
    }

    &--hover {
      opacity: 0;
      position: absolute;
      left: 0;
      top: 0;

      .channels-sidebar__section-toggle:hover & {
        opacity: 1;
      }
    }
  }

  &__section-title {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary, #000);
    transition: color 0.2s;

    .channels-sidebar__section-toggle:hover & {
      color: #535af1;
    }
  }

  &__section-add {
    @include mix.flex(row, center, center);
    width: 32px;
    height: 32px;
    border: none;
    background: transparent;
    border-radius: 50%;
    cursor: pointer;
    transition: background-color 0.2s;
    position: relative;

    &:hover {
      background-color: #eceefe;
    }
  }

  &__add-icon {
    width: 12px;
    height: 12px;
    transition: opacity 0.2s;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);

    &--default {
      opacity: 1;

      .channels-sidebar__section-add:hover & {
        opacity: 0;
      }
    }

    &--hover {
      opacity: 0;

      .channels-sidebar__section-add:hover & {
        opacity: 1;
      }
    }
  }

  &__section-content {
    display: flex;
    flex-direction: column;
    padding-left: calc(var(--space-3) + 12px + var(--space-2));
    padding-right: var(--space-5);
  }

  &__item {
    @include mix.flex(row, flex-start, center);
    width: auto;
    padding: 0;
    border: none;
    background: transparent;
    cursor: pointer;
    text-align: left;

    &--active {
      .channels-sidebar__item-content {
        background-color: #eceefe;
      }

      .channels-sidebar__item-name {
        color: #535af1;
      }
    }
  }

  &__item-content {
    @include mix.flex(row, flex-start, center);
    gap: 0.75rem;
    padding: 0.5rem 0.75rem;
    border-radius: 2rem;
    transition: background-color 0.2s;

    .channels-sidebar__item:hover & {
      background-color: #eceefe;
    }

    .channels-sidebar__item--active & {
      background-color: #eceefe;
    }
  }

  &__item-icon-wrapper {
    width: 16px;
    height: 16px;
    flex-shrink: 0;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  &__item-icon {
    width: 16px;
    height: 16px;
    flex-shrink: 0;
    transition: opacity 0.2s;

    &--default {
      opacity: 1;

      .channels-sidebar__item:hover & {
        opacity: 0;
      }

      .channels-sidebar__item--active & {
        opacity: 0;
      }
    }

    &--hover {
      opacity: 0;
      position: absolute;
      left: 0;
      top: 0;

      .channels-sidebar__item:hover & {
        opacity: 1;
      }

      .channels-sidebar__item--active & {
        opacity: 1;
      }
    }
  }

  &__item-name {
    font-size: 1rem;
    font-weight: 500;
    color: var(--text-primary, #000);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  &__item-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    flex-shrink: 0;
    object-fit: cover;
  }

  &__item--dm {
    .channels-sidebar__item-name {
      flex: 1;
    }
  }

  &__add-channel-btn {
    @include mix.flex(row, flex-start, center);
    width: auto;
    padding: 0;
    margin-top: var(--space-1);
    border: none;
    background: transparent;
    cursor: pointer;
    text-align: left;
  }

  &__add-channel-content {
    @include mix.flex(row, flex-start, center);
    gap: 0.75rem;
    padding: 0.5rem 0.75rem;
    border-radius: 2rem;
    transition: background-color 0.2s;

    .channels-sidebar__add-channel-btn:hover & {
      background-color: #eceefe;
    }
  }

  &__add-channel-icon-wrapper {
    width: 16px;
    height: 16px;
    flex-shrink: 0;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  &__add-channel-icon {
    width: 16px;
    height: 16px;
    flex-shrink: 0;
    transition: opacity 0.2s;

    &--default {
      opacity: 1;

      .channels-sidebar__add-channel-btn:hover & {
        opacity: 0;
      }
    }

    &--hover {
      opacity: 0;
      position: absolute;
      left: 0;
      top: 0;

      .channels-sidebar__add-channel-btn:hover & {
        opacity: 1;
      }
    }
  }

  &__add-channel-text {
    font-size: 1rem;
    font-weight: 400;
    color: var(--text-primary, #000);
  }

  &__empty {
    padding: 2rem 1rem;
    text-align: center;
    color: var(--text-secondary, #999);
    font-size: 0.875rem;
  }
}
